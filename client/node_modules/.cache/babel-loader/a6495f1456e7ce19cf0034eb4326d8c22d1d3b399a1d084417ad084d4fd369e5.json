{"ast":null,"code":"class AudioManager {\n  constructor() {\n    this.musicTracks = {};\n    this.soundEffects = {};\n    this.currentMusic = null;\n    this.musicVolume = 0.5;\n    this.soundVolume = 0.7;\n    this.musicEnabled = true;\n    this.soundEnabled = true;\n    this.initialized = false;\n  }\n\n  /**\n   * Initialize audio manager and preload all audio files\n   */\n  async initialize() {\n    if (this.initialized) return;\n    try {\n      // Preload music tracks\n      this.musicTracks = {\n        menu: this.loadAudio(\"/audio/menu-theme.mp3\", true),\n        gameplayCalm: this.loadAudio(\"/audio/gameplay-calm.mp3\", true),\n        gameplayIntense: this.loadAudio(\"/audio/gameplay-intense.mp3\", true),\n        victory: this.loadAudio(\"/audio/victory-theme.mp3\", false)\n      };\n\n      // Preload sound effects\n      this.soundEffects = {\n        tileSlide: this.loadAudio(\"/audio/tile-slide.mp3\"),\n        tileClick: this.loadAudio(\"/audio/tile-click.mp3\"),\n        matchFound: this.loadAudio(\"/audio/match-found.mp3\"),\n        puzzleComplete: this.loadAudio(\"/audio/puzzle-complete.mp3\"),\n        achievementUnlock: this.loadAudio(\"/audio/achievement-unlock.mp3\"),\n        powerupActivate: this.loadAudio(\"/audio/powerup-activate.mp3\"),\n        powerupEarned: this.loadAudio(\"/audio/powerup-earned.mp3\"),\n        levelUp: this.loadAudio(\"/audio/level-up.mp3\"),\n        countdown: this.loadAudio(\"/audio/countdown.mp3\"),\n        notification: this.loadAudio(\"/audio/notification.mp3\")\n      };\n\n      // Set initial volumes\n      Object.values(this.musicTracks).forEach(audio => {\n        if (audio) audio.volume = this.musicVolume;\n      });\n      Object.values(this.soundEffects).forEach(audio => {\n        if (audio) audio.volume = this.soundVolume;\n      });\n      this.initialized = true;\n      console.log(\"ðŸ”Š Audio Manager initialized\");\n    } catch (error) {\n      console.error(\"Error initializing audio:\", error);\n    }\n  }\n\n  /**\n   * Load an audio file\n   * @param {string} path - Path to audio file\n   * @param {boolean} loop - Whether to loop the audio\n   * @returns {HTMLAudioElement|null}\n   */\n  loadAudio(path, loop = false) {\n    try {\n      const audio = new Audio(path);\n      audio.loop = loop;\n      audio.preload = \"auto\";\n\n      // Handle load errors gracefully\n      audio.addEventListener(\"error\", e => {\n        console.warn(`Failed to load audio: ${path}`);\n      });\n      return audio;\n    } catch (error) {\n      console.warn(`Error creating audio: ${path}`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Play background music\n   * @param {string} trackName - Name of the track\n   */\n  playMusic(trackName) {\n    if (!this.musicEnabled || !this.initialized) return;\n\n    // Stop current music\n    if (this.currentMusic) {\n      this.currentMusic.pause();\n      this.currentMusic.currentTime = 0;\n    }\n\n    // Play new music\n    const track = this.musicTracks[trackName];\n    if (track) {\n      track.volume = this.musicVolume;\n      track.play().catch(err => console.warn(\"Music play failed:\", err));\n      this.currentMusic = track;\n    }\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} soundName - Name of the sound effect\n   */\n  playSound(soundName) {\n    if (!this.soundEnabled || !this.initialized) return;\n    const sound = this.soundEffects[soundName];\n    if (sound) {\n      // Clone the audio to allow overlapping sounds\n      const soundClone = sound.cloneNode();\n      soundClone.volume = this.soundVolume;\n      soundClone.play().catch(err => console.warn(\"Sound play failed:\", err));\n    }\n  }\n\n  /**\n   * Stop all music\n   */\n  stopMusic() {\n    if (this.currentMusic) {\n      this.currentMusic.pause();\n      this.currentMusic.currentTime = 0;\n      this.currentMusic = null;\n    }\n  }\n\n  /**\n   * Set music volume\n   * @param {number} volume - Volume level (0-1)\n   */\n  setMusicVolume(volume) {\n    this.musicVolume = Math.max(0, Math.min(1, volume));\n    Object.values(this.musicTracks).forEach(audio => {\n      if (audio) audio.volume = this.musicVolume;\n    });\n    if (this.currentMusic) {\n      this.currentMusic.volume = this.musicVolume;\n    }\n  }\n\n  /**\n   * Set sound effects volume\n   * @param {number} volume - Volume level (0-1)\n   */\n  setSoundVolume(volume) {\n    this.soundVolume = Math.max(0, Math.min(1, volume));\n    Object.values(this.soundEffects).forEach(audio => {\n      if (audio) audio.volume = this.soundVolume;\n    });\n  }\n\n  /**\n   * Enable/disable music\n   * @param {boolean} enabled\n   */\n  setMusicEnabled(enabled) {\n    this.musicEnabled = enabled;\n    if (!enabled && this.currentMusic) {\n      this.stopMusic();\n    }\n  }\n\n  /**\n   * Enable/disable sound effects\n   * @param {boolean} enabled\n   */\n  setSoundEnabled(enabled) {\n    this.soundEnabled = enabled;\n  }\n\n  /**\n   * Get current music state\n   * @returns {object}\n   */\n  getState() {\n    return {\n      musicVolume: this.musicVolume,\n      soundVolume: this.soundVolume,\n      musicEnabled: this.musicEnabled,\n      soundEnabled: this.soundEnabled,\n      currentTrack: this.currentMusic ? \"playing\" : \"stopped\"\n    };\n  }\n}\n\n// Create singleton instance\nconst audioManager = new AudioManager();\nexport default audioManager;","map":{"version":3,"names":["AudioManager","constructor","musicTracks","soundEffects","currentMusic","musicVolume","soundVolume","musicEnabled","soundEnabled","initialized","initialize","menu","loadAudio","gameplayCalm","gameplayIntense","victory","tileSlide","tileClick","matchFound","puzzleComplete","achievementUnlock","powerupActivate","powerupEarned","levelUp","countdown","notification","Object","values","forEach","audio","volume","console","log","error","path","loop","Audio","preload","addEventListener","e","warn","playMusic","trackName","pause","currentTime","track","play","catch","err","playSound","soundName","sound","soundClone","cloneNode","stopMusic","setMusicVolume","Math","max","min","setSoundVolume","setMusicEnabled","enabled","setSoundEnabled","getState","currentTrack","audioManager"],"sources":["/home/atlas/puzzle/client/src/utils/audioManager.js"],"sourcesContent":["class AudioManager {\n  constructor() {\n    this.musicTracks = {};\n    this.soundEffects = {};\n    this.currentMusic = null;\n    this.musicVolume = 0.5;\n    this.soundVolume = 0.7;\n    this.musicEnabled = true;\n    this.soundEnabled = true;\n    this.initialized = false;\n  }\n\n  /**\n   * Initialize audio manager and preload all audio files\n   */\n  async initialize() {\n    if (this.initialized) return;\n\n    try {\n      // Preload music tracks\n      this.musicTracks = {\n        menu: this.loadAudio(\"/audio/menu-theme.mp3\", true),\n        gameplayCalm: this.loadAudio(\"/audio/gameplay-calm.mp3\", true),\n        gameplayIntense: this.loadAudio(\"/audio/gameplay-intense.mp3\", true),\n        victory: this.loadAudio(\"/audio/victory-theme.mp3\", false),\n      };\n\n      // Preload sound effects\n      this.soundEffects = {\n        tileSlide: this.loadAudio(\"/audio/tile-slide.mp3\"),\n        tileClick: this.loadAudio(\"/audio/tile-click.mp3\"),\n        matchFound: this.loadAudio(\"/audio/match-found.mp3\"),\n        puzzleComplete: this.loadAudio(\"/audio/puzzle-complete.mp3\"),\n        achievementUnlock: this.loadAudio(\"/audio/achievement-unlock.mp3\"),\n        powerupActivate: this.loadAudio(\"/audio/powerup-activate.mp3\"),\n        powerupEarned: this.loadAudio(\"/audio/powerup-earned.mp3\"),\n        levelUp: this.loadAudio(\"/audio/level-up.mp3\"),\n        countdown: this.loadAudio(\"/audio/countdown.mp3\"),\n        notification: this.loadAudio(\"/audio/notification.mp3\"),\n      };\n\n      // Set initial volumes\n      Object.values(this.musicTracks).forEach((audio) => {\n        if (audio) audio.volume = this.musicVolume;\n      });\n\n      Object.values(this.soundEffects).forEach((audio) => {\n        if (audio) audio.volume = this.soundVolume;\n      });\n\n      this.initialized = true;\n      console.log(\"ðŸ”Š Audio Manager initialized\");\n    } catch (error) {\n      console.error(\"Error initializing audio:\", error);\n    }\n  }\n\n  /**\n   * Load an audio file\n   * @param {string} path - Path to audio file\n   * @param {boolean} loop - Whether to loop the audio\n   * @returns {HTMLAudioElement|null}\n   */\n  loadAudio(path, loop = false) {\n    try {\n      const audio = new Audio(path);\n      audio.loop = loop;\n      audio.preload = \"auto\";\n\n      // Handle load errors gracefully\n      audio.addEventListener(\"error\", (e) => {\n        console.warn(`Failed to load audio: ${path}`);\n      });\n\n      return audio;\n    } catch (error) {\n      console.warn(`Error creating audio: ${path}`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Play background music\n   * @param {string} trackName - Name of the track\n   */\n  playMusic(trackName) {\n    if (!this.musicEnabled || !this.initialized) return;\n\n    // Stop current music\n    if (this.currentMusic) {\n      this.currentMusic.pause();\n      this.currentMusic.currentTime = 0;\n    }\n\n    // Play new music\n    const track = this.musicTracks[trackName];\n    if (track) {\n      track.volume = this.musicVolume;\n      track.play().catch((err) => console.warn(\"Music play failed:\", err));\n      this.currentMusic = track;\n    }\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} soundName - Name of the sound effect\n   */\n  playSound(soundName) {\n    if (!this.soundEnabled || !this.initialized) return;\n\n    const sound = this.soundEffects[soundName];\n    if (sound) {\n      // Clone the audio to allow overlapping sounds\n      const soundClone = sound.cloneNode();\n      soundClone.volume = this.soundVolume;\n      soundClone.play().catch((err) => console.warn(\"Sound play failed:\", err));\n    }\n  }\n\n  /**\n   * Stop all music\n   */\n  stopMusic() {\n    if (this.currentMusic) {\n      this.currentMusic.pause();\n      this.currentMusic.currentTime = 0;\n      this.currentMusic = null;\n    }\n  }\n\n  /**\n   * Set music volume\n   * @param {number} volume - Volume level (0-1)\n   */\n  setMusicVolume(volume) {\n    this.musicVolume = Math.max(0, Math.min(1, volume));\n\n    Object.values(this.musicTracks).forEach((audio) => {\n      if (audio) audio.volume = this.musicVolume;\n    });\n\n    if (this.currentMusic) {\n      this.currentMusic.volume = this.musicVolume;\n    }\n  }\n\n  /**\n   * Set sound effects volume\n   * @param {number} volume - Volume level (0-1)\n   */\n  setSoundVolume(volume) {\n    this.soundVolume = Math.max(0, Math.min(1, volume));\n\n    Object.values(this.soundEffects).forEach((audio) => {\n      if (audio) audio.volume = this.soundVolume;\n    });\n  }\n\n  /**\n   * Enable/disable music\n   * @param {boolean} enabled\n   */\n  setMusicEnabled(enabled) {\n    this.musicEnabled = enabled;\n\n    if (!enabled && this.currentMusic) {\n      this.stopMusic();\n    }\n  }\n\n  /**\n   * Enable/disable sound effects\n   * @param {boolean} enabled\n   */\n  setSoundEnabled(enabled) {\n    this.soundEnabled = enabled;\n  }\n\n  /**\n   * Get current music state\n   * @returns {object}\n   */\n  getState() {\n    return {\n      musicVolume: this.musicVolume,\n      soundVolume: this.soundVolume,\n      musicEnabled: this.musicEnabled,\n      soundEnabled: this.soundEnabled,\n      currentTrack: this.currentMusic ? \"playing\" : \"stopped\",\n    };\n  }\n}\n\n// Create singleton instance\nconst audioManager = new AudioManager();\n\nexport default audioManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}