{"ast":null,"code":"var _jsxFileName = \"/home/atlas/puzzle/client/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport io from 'socket.io-client';\nimport './styles/App.css';\n\n// API and utilities\nimport { authAPI, userAPI, gameAPI, leaderboardAPI, achievementAPI, powerupAPI, saveTokens, clearTokens, isAuthenticated } from './utils/apiClient';\nimport audioManager from './utils/audioManager';\nimport * as puzzleLogic from './utils/puzzleLogic';\n\n// Components (will be defined after App)\nimport LoginScreen from './components/LoginScreen';\nimport MainMenu from './components/MainMenu';\nimport GameBoard from './components/GameBoard';\nimport { NotificationToast, Matchmaking, VictoryScreen, StoryModal, Leaderboard, UserProfile, AchievementPanel, PowerupInventory, SettingsPanel } from './components/AllComponents';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\nfunction App() {\n  _s();\n  // Authentication & User\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userStats, setUserStats] = useState(null);\n  const [userPreferences, setUserPreferences] = useState(null);\n\n  // Navigation\n  const [currentScreen, setCurrentScreen] = useState('login');\n\n  // Game State\n  const [gameSession, setGameSession] = useState(null);\n  const [boardSize, setBoardSize] = useState(4);\n  const [gameMode, setGameMode] = useState('speed');\n  const [board, setBoard] = useState([]);\n  const [moveCount, setMoveCount] = useState(0);\n  const [gameTime, setGameTime] = useState(0);\n  const [isGameActive, setIsGameActive] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n\n  // Multiplayer\n  const [socket, setSocket] = useState(null);\n  const [inMatchmaking, setInMatchmaking] = useState(false);\n  const [opponent, setOpponent] = useState(null);\n  const [opponentBoard, setOpponentBoard] = useState([]);\n\n  // UI State\n  const [achievements, setAchievements] = useState([]);\n  const [userAchievements, setUserAchievements] = useState([]);\n  const [powerups, setPowerups] = useState([]);\n  const [userPowerups, setUserPowerups] = useState([]);\n  const [leaderboards, setLeaderboards] = useState({});\n  const [notifications, setNotifications] = useState([]);\n  const [showVictory, setShowVictory] = useState(false);\n  const [victoryData, setVictoryData] = useState(null);\n  const [showStory, setShowStory] = useState(false);\n  const [storySegment, setStorySegment] = useState(null);\n  const [currentTheme, setCurrentTheme] = useState('dasher');\n\n  // Move history for replay\n  const [moveHistory, setMoveHistory] = useState([]);\n  useEffect(() => {\n    initializeApp();\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, []);\n  const initializeApp = async () => {\n    // Initialize audio\n    await audioManager.initialize();\n    audioManager.playMusic('menu');\n\n    // Check if user is already logged in\n    if (isAuthenticated()) {\n      try {\n        const response = await authAPI.verify();\n        if (response.success) {\n          setIsLoggedIn(true);\n          setCurrentUser(response.user);\n          await loadUserData(response.user.userId);\n          setCurrentScreen('menu');\n        }\n      } catch (error) {\n        console.error('Token verification failed:', error);\n        clearTokens();\n      }\n    }\n  };\n  const handleLogin = async (username, password) => {\n    try {\n      const response = await authAPI.login(username, password);\n      if (response.success) {\n        saveTokens(response.token, response.refreshToken);\n        setIsLoggedIn(true);\n        setCurrentUser(response.user);\n        await loadUserData(response.user.userId);\n        setCurrentScreen('menu');\n\n        // Initialize socket connection\n        initializeSocket(response.token);\n        showNotification('Welcome back!', 'success');\n        audioManager.playSound('notification');\n      }\n    } catch (error) {\n      showNotification(error.message || 'Login failed', 'error');\n      throw error;\n    }\n  };\n  const handleRegister = async (username, email, password, displayName) => {\n    try {\n      const response = await authAPI.register(username, email, password, displayName);\n      if (response.success) {\n        saveTokens(response.token, response.refreshToken);\n        setIsLoggedIn(true);\n        setCurrentUser(response.user);\n        await loadUserData(response.user.userId);\n        setCurrentScreen('menu');\n        initializeSocket(response.token);\n        showNotification('Account created successfully!', 'success');\n        audioManager.playSound('notification');\n      }\n    } catch (error) {\n      showNotification(error.message || 'Registration failed', 'error');\n      throw error;\n    }\n  };\n  const handleLogout = () => {\n    clearTokens();\n    setIsLoggedIn(false);\n    setCurrentUser(null);\n    setUserStats(null);\n    setCurrentScreen('login');\n    if (socket) {\n      socket.disconnect();\n      setSocket(null);\n    }\n    audioManager.stopMusic();\n    audioManager.playMusic('menu');\n    showNotification('Logged out successfully', 'info');\n  };\n  const loadUserData = async userId => {\n    try {\n      // Load user stats\n      const statsResponse = await userAPI.getStats(userId);\n      if (statsResponse.success) {\n        setUserStats(statsResponse.stats);\n      }\n\n      // Load preferences\n      const prefsResponse = await userAPI.getPreferences();\n      if (prefsResponse.success) {\n        setUserPreferences(prefsResponse.preferences);\n        applyPreferences(prefsResponse.preferences);\n      }\n\n      // Load achievements\n      const achievementsResponse = await achievementAPI.getUserAchievements(userId);\n      if (achievementsResponse.success) {\n        setUserAchievements(achievementsResponse.achievements);\n      }\n\n      // Load powerups\n      const powerupsResponse = await powerupAPI.getUserPowerups();\n      if (powerupsResponse.success) {\n        setUserPowerups(powerupsResponse.powerups);\n      }\n\n      // Load all achievements and powerups for reference\n      const allAchievements = await achievementAPI.getAll();\n      setAchievements(allAchievements.achievements || []);\n      const allPowerups = await powerupAPI.getAll();\n      setPowerups(allPowerups.powerups || []);\n    } catch (error) {\n      console.error('Error loading user data:', error);\n    }\n  };\n  const applyPreferences = prefs => {\n    if (prefs.sound_enabled !== undefined) {\n      audioManager.setSoundEnabled(prefs.sound_enabled);\n    }\n    if (prefs.music_enabled !== undefined) {\n      audioManager.setMusicEnabled(prefs.music_enabled);\n    }\n    if (prefs.sound_volume !== undefined) {\n      audioManager.setSoundVolume(prefs.sound_volume);\n    }\n    if (prefs.music_volume !== undefined) {\n      audioManager.setMusicVolume(prefs.music_volume);\n    }\n    if (prefs.selected_theme) {\n      setCurrentTheme(prefs.selected_theme);\n    }\n    if (prefs.default_board_size) {\n      setBoardSize(prefs.default_board_size);\n    }\n    if (prefs.default_game_mode) {\n      setGameMode(prefs.default_game_mode);\n    }\n  };\n  const initializeSocket = token => {\n    const newSocket = io(SOCKET_URL, {\n      auth: {\n        token\n      }\n    });\n    newSocket.on('connect', () => {\n      console.log('Socket connected');\n    });\n    newSocket.on('matchmaking_joined', data => {\n      showNotification(`Searching for opponent... Position: ${data.position}`, 'info');\n    });\n    newSocket.on('match_found', data => {\n      handleMatchFound(data);\n    });\n    newSocket.on('opponent_move', moveData => {\n      handleOpponentMove(moveData);\n    });\n    newSocket.on('opponent_powerup', data => {\n      showNotification(`Opponent used ${data.powerupKey}!`, 'warning');\n      audioManager.playSound('powerupActivate');\n    });\n    newSocket.on('game_ended', data => {\n      handleGameEnd(data);\n    });\n    newSocket.on('opponent_disconnected', () => {\n      showNotification('Opponent disconnected', 'error');\n      endGame(true);\n    });\n    newSocket.on('disconnect', () => {\n      console.log('Socket disconnected');\n    });\n    setSocket(newSocket);\n  };\n  const startGame = async (size, mode) => {\n    try {\n      setBoardSize(size);\n      setGameMode(mode);\n\n      // Generate puzzle\n      const newBoard = puzzleLogic.generateSolvablePuzzle(size);\n      setBoard(newBoard);\n      setMoveCount(0);\n      setGameTime(0);\n      setMoveHistory([]);\n      setIsGameActive(true);\n      setIsPaused(false);\n\n      // Create game session\n      const response = await gameAPI.create(size, mode, null);\n      if (response.success) {\n        setGameSession(response);\n      }\n\n      // Change music based on mode\n      if (mode === 'speed' || mode === 'multiplayer') {\n        audioManager.playMusic('gameplayIntense');\n      } else {\n        audioManager.playMusic('gameplayCalm');\n      }\n      setCurrentScreen('game');\n      audioManager.playSound('notification');\n    } catch (error) {\n      console.error('Error starting game:', error);\n      showNotification('Failed to start game', 'error');\n    }\n  };\n  const handleTileClick = tileIndex => {\n    if (!isGameActive || isPaused) return;\n    const emptyIndex = board.indexOf(0);\n\n    // Check if move is valid\n    if (!puzzleLogic.canMoveTile(board, tileIndex, boardSize)) {\n      audioManager.playSound('tileClick');\n      return;\n    }\n\n    // Make move\n    const newBoard = puzzleLogic.moveTile(board, tileIndex);\n    if (!newBoard) return;\n    setBoard(newBoard);\n    setMoveCount(prev => prev + 1);\n\n    // Record move\n    const moveData = {\n      moveNumber: moveCount + 1,\n      tilePosition: tileIndex,\n      emptyPosition: emptyIndex,\n      direction: puzzleLogic.getMoveDirection(tileIndex, emptyIndex, boardSize),\n      boardState: newBoard,\n      timeElapsed: gameTime\n    };\n    setMoveHistory(prev => [...prev, moveData]);\n\n    // Send move to server if in multiplayer\n    if (gameMode === 'multiplayer' && socket && gameSession) {\n      socket.emit('game_move', {\n        sessionId: gameSession.sessionId,\n        moveData\n      });\n    }\n    audioManager.playSound('tileSlide');\n\n    // Check if puzzle is solved\n    if (puzzleLogic.isSolved(newBoard)) {\n      handlePuzzleSolved();\n    }\n  };\n  const handlePuzzleSolved = async () => {\n    setIsGameActive(false);\n    audioManager.playSound('puzzleComplete');\n    audioManager.playMusic('victory');\n    try {\n      // Calculate performance metrics\n      const minimumMoves = puzzleLogic.calculateMinimumMoves(board, boardSize);\n      const isPerfect = puzzleLogic.isPerfectGame(moveCount, minimumMoves);\n      const speedBonus = gameMode === 'speed' && gameTime < 60;\n\n      // Complete game on server\n      const response = await gameAPI.complete(gameSession.sessionId, {\n        winnerId: currentUser.userId,\n        completionTime: gameTime,\n        moveCount,\n        perfectGame: isPerfect,\n        speedBonus\n      });\n      if (response.success) {\n        var _response$eloChanges;\n        // Update local stats\n        await loadUserData(currentUser.userId);\n\n        // Show victory screen\n        setVictoryData({\n          time: gameTime,\n          moves: moveCount,\n          perfectGame: isPerfect,\n          speedBonus,\n          xpGained: response.xpGained,\n          leveledUp: response.leveledUp,\n          newLevel: response.newLevel,\n          unlockedAchievements: response.unlockedAchievements || [],\n          eloChange: ((_response$eloChanges = response.eloChanges) === null || _response$eloChanges === void 0 ? void 0 : _response$eloChanges.player1_change) || 0\n        });\n        setShowVictory(true);\n\n        // Show unlocked achievements\n        if (response.unlockedAchievements && response.unlockedAchievements.length > 0) {\n          response.unlockedAchievements.forEach(achievement => {\n            setTimeout(() => {\n              showNotification(`Achievement Unlocked: ${achievement.name}!`, 'achievement');\n              audioManager.playSound('achievementUnlock');\n            }, 1000);\n          });\n        }\n\n        // Check for level up\n        if (response.leveledUp) {\n          setTimeout(() => {\n            showNotification(`Level Up! You are now level ${response.newLevel}!`, 'levelup');\n            audioManager.playSound('levelUp');\n          }, 1500);\n        }\n\n        // Check for story progression\n        checkStoryProgression(response.newLevel);\n      }\n    } catch (error) {\n      console.error('Error completing game:', error);\n      showNotification('Error saving game results', 'error');\n    }\n  };\n  const endGame = (forfeit = false) => {\n    setIsGameActive(false);\n    setIsPaused(false);\n    audioManager.stopMusic();\n    audioManager.playMusic('menu');\n    if (forfeit) {\n      showNotification('Game ended', 'info');\n    }\n  };\n  const joinMatchmaking = (size, mode) => {\n    if (!socket) {\n      showNotification('Not connected to server', 'error');\n      return;\n    }\n    setBoardSize(size);\n    setGameMode(mode);\n    setInMatchmaking(true);\n    setCurrentScreen('matchmaking');\n    socket.emit('join_matchmaking', {\n      mode,\n      boardSize: size\n    });\n    audioManager.playSound('notification');\n  };\n  const leaveMatchmaking = () => {\n    if (socket && inMatchmaking) {\n      socket.emit('leave_matchmaking', {\n        mode: gameMode\n      });\n    }\n    setInMatchmaking(false);\n    setCurrentScreen('menu');\n    showNotification('Left matchmaking', 'info');\n  };\n  const handleMatchFound = async data => {\n    setInMatchmaking(false);\n    setOpponent(data.player2.userId === currentUser.userId ? data.player1 : data.player2);\n    setGameSession({\n      sessionId: data.sessionId\n    });\n    audioManager.playSound('matchFound');\n    showNotification('Match found!', 'success');\n\n    // Generate same board for both players\n    const newBoard = puzzleLogic.generateSolvablePuzzle(data.boardSize);\n    setBoard(newBoard);\n    setOpponentBoard(newBoard);\n    setMoveCount(0);\n    setGameTime(0);\n    setMoveHistory([]);\n\n    // Start game after countdown\n    setTimeout(() => {\n      setIsGameActive(true);\n      setCurrentScreen('game');\n      audioManager.playMusic('gameplayIntense');\n    }, 3000);\n  };\n  const handleOpponentMove = moveData => {\n    setOpponentBoard(moveData.boardState);\n  };\n  const handleGameEnd = data => {\n    setIsGameActive(false);\n    const didWin = data.winnerId === currentUser.userId;\n    showNotification(didWin ? 'You won!' : 'You lost!', didWin ? 'success' : 'error');\n    if (didWin) {\n      audioManager.playMusic('victory');\n      audioManager.playSound('puzzleComplete');\n    }\n  };\n  const usePowerup = async powerupKey => {\n    if (!isGameActive || isPaused) return;\n    try {\n      const response = await powerupAPI.use(powerupKey);\n      if (response.success) {\n        audioManager.playSound('powerupActivate');\n        showNotification('Powerup activated!', 'success');\n\n        // Apply powerup effect\n        applyPowerupEffect(powerupKey);\n\n        // Notify opponent if multiplayer\n        if (gameMode === 'multiplayer' && socket && gameSession) {\n          socket.emit('use_powerup', {\n            sessionId: gameSession.sessionId,\n            powerupKey\n          });\n        }\n\n        // Reload powerups\n        const powerupsResponse = await powerupAPI.getUserPowerups();\n        if (powerupsResponse.success) {\n          setUserPowerups(powerupsResponse.powerups);\n        }\n      }\n    } catch (error) {\n      showNotification('Failed to use powerup', 'error');\n    }\n  };\n  const applyPowerupEffect = powerupKey => {\n    switch (powerupKey) {\n      case 'peek':\n        // Show solution briefly (handled in GameBoard component)\n        break;\n      case 'hint':\n        const hintTile = puzzleLogic.getHint(board, boardSize);\n        if (hintTile !== null) {\n          // Highlight tile (handled in GameBoard component)\n        }\n        break;\n      case 'time_freeze':\n        // Pause timer for 10 seconds\n        setIsPaused(true);\n        setTimeout(() => setIsPaused(false), 10000);\n        break;\n      case 'undo_move':\n        // Undo last move\n        if (moveHistory.length > 0) {\n          const previousState = moveHistory[moveHistory.length - 2];\n          if (previousState) {\n            setBoard(previousState.boardState);\n            setMoveCount(prev => Math.max(0, prev - 1));\n            setMoveHistory(prev => prev.slice(0, -1));\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  };\n  const checkStoryProgression = level => {\n    let segment = null;\n    if (level === 5) {\n      segment = {\n        act: 1,\n        title: 'The Lost Reindeer',\n        content: 'Deep in the Northern forests, a young reindeer has wandered from the herd. The ancient puzzle stones glow with mysterious energy, showing you the way to guide them home...'\n      };\n    } else if (level === 15) {\n      segment = {\n        act: 2,\n        title: 'The Northern Lights Mystery',\n        content: 'The Aurora Borealis dances above as you discover the puzzle stones are connected to the lights themselves. Each solved puzzle makes the lights shine brighter, revealing hidden paths through the winter storm...'\n      };\n    } else if (level === 30) {\n      segment = {\n        act: 3,\n        title: 'The Winter Festival',\n        content: 'The reindeer village prepares for the grand Winter Festival! Your puzzle-solving skills have become legendary. Now the elder reindeer ask for your help to solve the ancient Festival Puzzles...'\n      };\n    } else if (level === 50) {\n      segment = {\n        act: 4,\n        title: 'The Grand Aurora',\n        content: 'At last, you have unlocked the final mystery! The puzzle stones reveal themselves as fragments of an ancient aurora crystal. As you complete the final arrangement, the Northern Lights burst forth in spectacular colors, and the entire reindeer kingdom celebrates your achievement!'\n      };\n    }\n    if (segment) {\n      setStorySegment(segment);\n      setShowStory(true);\n    }\n  };\n  const changeTheme = async themeName => {\n    try {\n      await userAPI.updatePreferences({\n        selected_theme: themeName\n      });\n      setCurrentTheme(themeName);\n      showNotification(`Theme changed to ${themeName}`, 'success');\n    } catch (error) {\n      showNotification('Failed to change theme', 'error');\n    }\n  };\n  const checkThemeUnlocks = stats => {\n    const unlocks = [];\n    if (stats.total_wins >= 50 && currentTheme === 'dasher') {\n      unlocks.push('prancer');\n    }\n    if (stats.total_wins >= 100) {\n      unlocks.push('comet');\n    }\n    if (stats.total_wins >= 200) {\n      unlocks.push('blitzen');\n    }\n    if (stats.elo_rating >= 1800) {\n      unlocks.push('rudolph');\n    }\n    if (currentUser.level >= 50) {\n      unlocks.push('aurora');\n    }\n    return unlocks;\n  };\n  const loadLeaderboards = async () => {\n    try {\n      const categories = ['speed_4x4', 'speed_overall', 'moves_4x4', 'moves_overall'];\n      const boards = {};\n      for (const category of categories) {\n        const response = await leaderboardAPI.get(category);\n        if (response.success) {\n          boards[category] = response.leaderboard;\n        }\n      }\n      setLeaderboards(boards);\n    } catch (error) {\n      console.error('Error loading leaderboards:', error);\n    }\n  };\n  const showNotification = (message, type = 'info') => {\n    const id = Date.now();\n    const notification = {\n      id,\n      message,\n      type\n    };\n    setNotifications(prev => [...prev, notification]);\n\n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      removeNotification(id);\n    }, 5000);\n  };\n  const removeNotification = id => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  };\n  useEffect(() => {\n    let interval;\n    if (isGameActive && !isPaused) {\n      interval = setInterval(() => {\n        setGameTime(prev => prev + 1);\n      }, 1000);\n    }\n    return () => {\n      if (interval) clearInterval(interval);\n    };\n  }, [isGameActive, isPaused]);\n  const navigateTo = screen => {\n    setCurrentScreen(screen);\n    if (screen === 'menu') {\n      audioManager.stopMusic();\n      audioManager.playMusic('menu');\n    }\n    if (screen === 'leaderboard') {\n      loadLeaderboards();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `app theme-${currentTheme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-container\",\n      children: notifications.map(notification => /*#__PURE__*/_jsxDEV(NotificationToast, {\n        message: notification.message,\n        type: notification.type,\n        onClose: () => removeNotification(notification.id)\n      }, notification.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 13\n    }, this), !isLoggedIn && /*#__PURE__*/_jsxDEV(LoginScreen, {\n      onLogin: handleLogin,\n      onRegister: handleRegister\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'menu' && /*#__PURE__*/_jsxDEV(MainMenu, {\n      user: currentUser,\n      stats: userStats,\n      onStartGame: startGame,\n      onJoinMatchmaking: joinMatchmaking,\n      onNavigate: navigateTo,\n      onLogout: handleLogout,\n      currentTheme: currentTheme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'game' && /*#__PURE__*/_jsxDEV(GameBoard, {\n      board: board,\n      boardSize: boardSize,\n      gameMode: gameMode,\n      moveCount: moveCount,\n      gameTime: gameTime,\n      isActive: isGameActive,\n      isPaused: isPaused,\n      opponent: opponent,\n      opponentBoard: opponentBoard,\n      userPowerups: userPowerups,\n      onTileClick: handleTileClick,\n      onUsePowerup: usePowerup,\n      onPause: () => setIsPaused(!isPaused),\n      onQuit: () => {\n        endGame(true);\n        navigateTo('menu');\n      },\n      currentTheme: currentTheme,\n      preferences: userPreferences\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'matchmaking' && /*#__PURE__*/_jsxDEV(Matchmaking, {\n      boardSize: boardSize,\n      gameMode: gameMode,\n      onCancel: leaveMatchmaking\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 751,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'leaderboard' && /*#__PURE__*/_jsxDEV(Leaderboard, {\n      leaderboards: leaderboards,\n      currentUser: currentUser,\n      onBack: () => navigateTo('menu')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'profile' && /*#__PURE__*/_jsxDEV(UserProfile, {\n      user: currentUser,\n      stats: userStats,\n      achievements: userAchievements,\n      onBack: () => navigateTo('menu'),\n      onUpdateProfile: async updates => {\n        await userAPI.updateProfile(updates);\n        await loadUserData(currentUser.userId);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 767,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'achievements' && /*#__PURE__*/_jsxDEV(AchievementPanel, {\n      achievements: achievements,\n      userAchievements: userAchievements,\n      onBack: () => navigateTo('menu')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 780,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'powerups' && /*#__PURE__*/_jsxDEV(PowerupInventory, {\n      powerups: powerups,\n      userPowerups: userPowerups,\n      onBack: () => navigateTo('menu')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 788,\n      columnNumber: 17\n    }, this), isLoggedIn && currentScreen === 'settings' && /*#__PURE__*/_jsxDEV(SettingsPanel, {\n      preferences: userPreferences,\n      currentTheme: currentTheme,\n      onUpdatePreferences: async prefs => {\n        await userAPI.updatePreferences(prefs);\n        await loadUserData(currentUser.userId);\n        applyPreferences(prefs);\n      },\n      onChangeTheme: changeTheme,\n      onBack: () => navigateTo('menu'),\n      availableThemes: checkThemeUnlocks(userStats || {})\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 17\n    }, this), showVictory && /*#__PURE__*/_jsxDEV(VictoryScreen, {\n      data: victoryData,\n      onClose: () => {\n        setShowVictory(false);\n        navigateTo('menu');\n      },\n      onPlayAgain: () => {\n        setShowVictory(false);\n        startGame(boardSize, gameMode);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 812,\n      columnNumber: 17\n    }, this), showStory && /*#__PURE__*/_jsxDEV(StoryModal, {\n      segment: storySegment,\n      onClose: () => setShowStory(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 693,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"73CO8y0u//0g9YX8SPwEzUzuEUQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","io","authAPI","userAPI","gameAPI","leaderboardAPI","achievementAPI","powerupAPI","saveTokens","clearTokens","isAuthenticated","audioManager","puzzleLogic","LoginScreen","MainMenu","GameBoard","NotificationToast","Matchmaking","VictoryScreen","StoryModal","Leaderboard","UserProfile","AchievementPanel","PowerupInventory","SettingsPanel","jsxDEV","_jsxDEV","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","App","_s","isLoggedIn","setIsLoggedIn","currentUser","setCurrentUser","userStats","setUserStats","userPreferences","setUserPreferences","currentScreen","setCurrentScreen","gameSession","setGameSession","boardSize","setBoardSize","gameMode","setGameMode","board","setBoard","moveCount","setMoveCount","gameTime","setGameTime","isGameActive","setIsGameActive","isPaused","setIsPaused","socket","setSocket","inMatchmaking","setInMatchmaking","opponent","setOpponent","opponentBoard","setOpponentBoard","achievements","setAchievements","userAchievements","setUserAchievements","powerups","setPowerups","userPowerups","setUserPowerups","leaderboards","setLeaderboards","notifications","setNotifications","showVictory","setShowVictory","victoryData","setVictoryData","showStory","setShowStory","storySegment","setStorySegment","currentTheme","setCurrentTheme","moveHistory","setMoveHistory","initializeApp","disconnect","initialize","playMusic","response","verify","success","user","loadUserData","userId","error","console","handleLogin","username","password","login","token","refreshToken","initializeSocket","showNotification","playSound","message","handleRegister","email","displayName","register","handleLogout","stopMusic","statsResponse","getStats","stats","prefsResponse","getPreferences","preferences","applyPreferences","achievementsResponse","getUserAchievements","powerupsResponse","getUserPowerups","allAchievements","getAll","allPowerups","prefs","sound_enabled","undefined","setSoundEnabled","music_enabled","setMusicEnabled","sound_volume","setSoundVolume","music_volume","setMusicVolume","selected_theme","default_board_size","default_game_mode","newSocket","auth","on","log","data","position","handleMatchFound","moveData","handleOpponentMove","powerupKey","handleGameEnd","endGame","startGame","size","mode","newBoard","generateSolvablePuzzle","create","handleTileClick","tileIndex","emptyIndex","indexOf","canMoveTile","moveTile","prev","moveNumber","tilePosition","emptyPosition","direction","getMoveDirection","boardState","timeElapsed","emit","sessionId","isSolved","handlePuzzleSolved","minimumMoves","calculateMinimumMoves","isPerfect","isPerfectGame","speedBonus","complete","winnerId","completionTime","perfectGame","_response$eloChanges","time","moves","xpGained","leveledUp","newLevel","unlockedAchievements","eloChange","eloChanges","player1_change","length","forEach","achievement","setTimeout","name","checkStoryProgression","forfeit","joinMatchmaking","leaveMatchmaking","player2","player1","didWin","usePowerup","use","applyPowerupEffect","hintTile","getHint","previousState","Math","max","slice","level","segment","act","title","content","changeTheme","themeName","updatePreferences","checkThemeUnlocks","unlocks","total_wins","push","elo_rating","loadLeaderboards","categories","boards","category","get","leaderboard","type","id","Date","now","notification","removeNotification","filter","n","interval","setInterval","clearInterval","navigateTo","screen","className","children","map","onClose","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onRegister","onStartGame","onJoinMatchmaking","onNavigate","onLogout","isActive","onTileClick","onUsePowerup","onPause","onQuit","onCancel","onBack","onUpdateProfile","updates","updateProfile","onUpdatePreferences","onChangeTheme","availableThemes","onPlayAgain","_c","$RefreshReg$"],"sources":["/home/atlas/puzzle/client/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport io from 'socket.io-client';\nimport './styles/App.css';\n\n// API and utilities\nimport { authAPI, userAPI, gameAPI, leaderboardAPI, achievementAPI, powerupAPI, saveTokens, clearTokens, isAuthenticated } from './utils/apiClient';\nimport audioManager from './utils/audioManager';\nimport * as puzzleLogic from './utils/puzzleLogic';\n\n// Components (will be defined after App)\nimport LoginScreen from './components/LoginScreen';\nimport MainMenu from './components/MainMenu';\nimport GameBoard from './components/GameBoard';\nimport {\n    NotificationToast,\n    Matchmaking,\n    VictoryScreen,\n    StoryModal,\n    Leaderboard,\n    UserProfile,\n    AchievementPanel,\n    PowerupInventory,\n    SettingsPanel\n} from './components/AllComponents';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n\nfunction App() {\n    // Authentication & User\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [currentUser, setCurrentUser] = useState(null);\n    const [userStats, setUserStats] = useState(null);\n    const [userPreferences, setUserPreferences] = useState(null);\n\n    // Navigation\n    const [currentScreen, setCurrentScreen] = useState('login');\n\n    // Game State\n    const [gameSession, setGameSession] = useState(null);\n    const [boardSize, setBoardSize] = useState(4);\n    const [gameMode, setGameMode] = useState('speed');\n    const [board, setBoard] = useState([]);\n    const [moveCount, setMoveCount] = useState(0);\n    const [gameTime, setGameTime] = useState(0);\n    const [isGameActive, setIsGameActive] = useState(false);\n    const [isPaused, setIsPaused] = useState(false);\n\n    // Multiplayer\n    const [socket, setSocket] = useState(null);\n    const [inMatchmaking, setInMatchmaking] = useState(false);\n    const [opponent, setOpponent] = useState(null);\n    const [opponentBoard, setOpponentBoard] = useState([]);\n\n    // UI State\n    const [achievements, setAchievements] = useState([]);\n    const [userAchievements, setUserAchievements] = useState([]);\n    const [powerups, setPowerups] = useState([]);\n    const [userPowerups, setUserPowerups] = useState([]);\n    const [leaderboards, setLeaderboards] = useState({});\n    const [notifications, setNotifications] = useState([]);\n    const [showVictory, setShowVictory] = useState(false);\n    const [victoryData, setVictoryData] = useState(null);\n    const [showStory, setShowStory] = useState(false);\n    const [storySegment, setStorySegment] = useState(null);\n    const [currentTheme, setCurrentTheme] = useState('dasher');\n\n    // Move history for replay\n    const [moveHistory, setMoveHistory] = useState([]);\n\n    useEffect(() => {\n        initializeApp();\n\n        return () => {\n            if (socket) {\n                socket.disconnect();\n            }\n        };\n    }, []);\n\n    const initializeApp = async () => {\n        // Initialize audio\n        await audioManager.initialize();\n        audioManager.playMusic('menu');\n\n        // Check if user is already logged in\n        if (isAuthenticated()) {\n            try {\n                const response = await authAPI.verify();\n                if (response.success) {\n                    setIsLoggedIn(true);\n                    setCurrentUser(response.user);\n                    await loadUserData(response.user.userId);\n                    setCurrentScreen('menu');\n                }\n            } catch (error) {\n                console.error('Token verification failed:', error);\n                clearTokens();\n            }\n        }\n    };\n\n    const handleLogin = async (username, password) => {\n        try {\n            const response = await authAPI.login(username, password);\n\n            if (response.success) {\n                saveTokens(response.token, response.refreshToken);\n                setIsLoggedIn(true);\n                setCurrentUser(response.user);\n                await loadUserData(response.user.userId);\n                setCurrentScreen('menu');\n\n                // Initialize socket connection\n                initializeSocket(response.token);\n\n                showNotification('Welcome back!', 'success');\n                audioManager.playSound('notification');\n            }\n        } catch (error) {\n            showNotification(error.message || 'Login failed', 'error');\n            throw error;\n        }\n    };\n\n    const handleRegister = async (username, email, password, displayName) => {\n        try {\n            const response = await authAPI.register(username, email, password, displayName);\n\n            if (response.success) {\n                saveTokens(response.token, response.refreshToken);\n                setIsLoggedIn(true);\n                setCurrentUser(response.user);\n                await loadUserData(response.user.userId);\n                setCurrentScreen('menu');\n\n                initializeSocket(response.token);\n\n                showNotification('Account created successfully!', 'success');\n                audioManager.playSound('notification');\n            }\n        } catch (error) {\n            showNotification(error.message || 'Registration failed', 'error');\n            throw error;\n        }\n    };\n\n    const handleLogout = () => {\n        clearTokens();\n        setIsLoggedIn(false);\n        setCurrentUser(null);\n        setUserStats(null);\n        setCurrentScreen('login');\n\n        if (socket) {\n            socket.disconnect();\n            setSocket(null);\n        }\n\n        audioManager.stopMusic();\n        audioManager.playMusic('menu');\n        showNotification('Logged out successfully', 'info');\n    };\n\n    const loadUserData = async (userId) => {\n        try {\n            // Load user stats\n            const statsResponse = await userAPI.getStats(userId);\n            if (statsResponse.success) {\n                setUserStats(statsResponse.stats);\n            }\n\n            // Load preferences\n            const prefsResponse = await userAPI.getPreferences();\n            if (prefsResponse.success) {\n                setUserPreferences(prefsResponse.preferences);\n                applyPreferences(prefsResponse.preferences);\n            }\n\n            // Load achievements\n            const achievementsResponse = await achievementAPI.getUserAchievements(userId);\n            if (achievementsResponse.success) {\n                setUserAchievements(achievementsResponse.achievements);\n            }\n\n            // Load powerups\n            const powerupsResponse = await powerupAPI.getUserPowerups();\n            if (powerupsResponse.success) {\n                setUserPowerups(powerupsResponse.powerups);\n            }\n\n            // Load all achievements and powerups for reference\n            const allAchievements = await achievementAPI.getAll();\n            setAchievements(allAchievements.achievements || []);\n\n            const allPowerups = await powerupAPI.getAll();\n            setPowerups(allPowerups.powerups || []);\n\n        } catch (error) {\n            console.error('Error loading user data:', error);\n        }\n    };\n\n    const applyPreferences = (prefs) => {\n        if (prefs.sound_enabled !== undefined) {\n            audioManager.setSoundEnabled(prefs.sound_enabled);\n        }\n        if (prefs.music_enabled !== undefined) {\n            audioManager.setMusicEnabled(prefs.music_enabled);\n        }\n        if (prefs.sound_volume !== undefined) {\n            audioManager.setSoundVolume(prefs.sound_volume);\n        }\n        if (prefs.music_volume !== undefined) {\n            audioManager.setMusicVolume(prefs.music_volume);\n        }\n        if (prefs.selected_theme) {\n            setCurrentTheme(prefs.selected_theme);\n        }\n        if (prefs.default_board_size) {\n            setBoardSize(prefs.default_board_size);\n        }\n        if (prefs.default_game_mode) {\n            setGameMode(prefs.default_game_mode);\n        }\n    };\n\n    const initializeSocket = (token) => {\n        const newSocket = io(SOCKET_URL, {\n            auth: { token }\n        });\n\n        newSocket.on('connect', () => {\n            console.log('Socket connected');\n        });\n\n        newSocket.on('matchmaking_joined', (data) => {\n            showNotification(`Searching for opponent... Position: ${data.position}`, 'info');\n        });\n\n        newSocket.on('match_found', (data) => {\n            handleMatchFound(data);\n        });\n\n        newSocket.on('opponent_move', (moveData) => {\n            handleOpponentMove(moveData);\n        });\n\n        newSocket.on('opponent_powerup', (data) => {\n            showNotification(`Opponent used ${data.powerupKey}!`, 'warning');\n            audioManager.playSound('powerupActivate');\n        });\n\n        newSocket.on('game_ended', (data) => {\n            handleGameEnd(data);\n        });\n\n        newSocket.on('opponent_disconnected', () => {\n            showNotification('Opponent disconnected', 'error');\n            endGame(true);\n        });\n\n        newSocket.on('disconnect', () => {\n            console.log('Socket disconnected');\n        });\n\n        setSocket(newSocket);\n    };\n\n    const startGame = async (size, mode) => {\n        try {\n            setBoardSize(size);\n            setGameMode(mode);\n\n            // Generate puzzle\n            const newBoard = puzzleLogic.generateSolvablePuzzle(size);\n            setBoard(newBoard);\n            setMoveCount(0);\n            setGameTime(0);\n            setMoveHistory([]);\n            setIsGameActive(true);\n            setIsPaused(false);\n\n            // Create game session\n            const response = await gameAPI.create(size, mode, null);\n            if (response.success) {\n                setGameSession(response);\n            }\n\n            // Change music based on mode\n            if (mode === 'speed' || mode === 'multiplayer') {\n                audioManager.playMusic('gameplayIntense');\n            } else {\n                audioManager.playMusic('gameplayCalm');\n            }\n\n            setCurrentScreen('game');\n            audioManager.playSound('notification');\n        } catch (error) {\n            console.error('Error starting game:', error);\n            showNotification('Failed to start game', 'error');\n        }\n    };\n\n    const handleTileClick = (tileIndex) => {\n        if (!isGameActive || isPaused) return;\n\n        const emptyIndex = board.indexOf(0);\n\n        // Check if move is valid\n        if (!puzzleLogic.canMoveTile(board, tileIndex, boardSize)) {\n            audioManager.playSound('tileClick');\n            return;\n        }\n\n        // Make move\n        const newBoard = puzzleLogic.moveTile(board, tileIndex);\n        if (!newBoard) return;\n\n        setBoard(newBoard);\n        setMoveCount(prev => prev + 1);\n\n        // Record move\n        const moveData = {\n            moveNumber: moveCount + 1,\n            tilePosition: tileIndex,\n            emptyPosition: emptyIndex,\n            direction: puzzleLogic.getMoveDirection(tileIndex, emptyIndex, boardSize),\n            boardState: newBoard,\n            timeElapsed: gameTime\n        };\n\n        setMoveHistory(prev => [...prev, moveData]);\n\n        // Send move to server if in multiplayer\n        if (gameMode === 'multiplayer' && socket && gameSession) {\n            socket.emit('game_move', {\n                sessionId: gameSession.sessionId,\n                moveData\n            });\n        }\n\n        audioManager.playSound('tileSlide');\n\n        // Check if puzzle is solved\n        if (puzzleLogic.isSolved(newBoard)) {\n            handlePuzzleSolved();\n        }\n    };\n\n    const handlePuzzleSolved = async () => {\n        setIsGameActive(false);\n        audioManager.playSound('puzzleComplete');\n        audioManager.playMusic('victory');\n\n        try {\n            // Calculate performance metrics\n            const minimumMoves = puzzleLogic.calculateMinimumMoves(board, boardSize);\n            const isPerfect = puzzleLogic.isPerfectGame(moveCount, minimumMoves);\n            const speedBonus = gameMode === 'speed' && gameTime < 60;\n\n            // Complete game on server\n            const response = await gameAPI.complete(gameSession.sessionId, {\n                winnerId: currentUser.userId,\n                completionTime: gameTime,\n                moveCount,\n                perfectGame: isPerfect,\n                speedBonus\n            });\n\n            if (response.success) {\n                // Update local stats\n                await loadUserData(currentUser.userId);\n\n                // Show victory screen\n                setVictoryData({\n                    time: gameTime,\n                    moves: moveCount,\n                    perfectGame: isPerfect,\n                    speedBonus,\n                    xpGained: response.xpGained,\n                    leveledUp: response.leveledUp,\n                    newLevel: response.newLevel,\n                    unlockedAchievements: response.unlockedAchievements || [],\n                    eloChange: response.eloChanges?.player1_change || 0\n                });\n\n                setShowVictory(true);\n\n                // Show unlocked achievements\n                if (response.unlockedAchievements && response.unlockedAchievements.length > 0) {\n                    response.unlockedAchievements.forEach(achievement => {\n                        setTimeout(() => {\n                            showNotification(`Achievement Unlocked: ${achievement.name}!`, 'achievement');\n                            audioManager.playSound('achievementUnlock');\n                        }, 1000);\n                    });\n                }\n\n                // Check for level up\n                if (response.leveledUp) {\n                    setTimeout(() => {\n                        showNotification(`Level Up! You are now level ${response.newLevel}!`, 'levelup');\n                        audioManager.playSound('levelUp');\n                    }, 1500);\n                }\n\n                // Check for story progression\n                checkStoryProgression(response.newLevel);\n            }\n        } catch (error) {\n            console.error('Error completing game:', error);\n            showNotification('Error saving game results', 'error');\n        }\n    };\n\n    const endGame = (forfeit = false) => {\n        setIsGameActive(false);\n        setIsPaused(false);\n        audioManager.stopMusic();\n        audioManager.playMusic('menu');\n\n        if (forfeit) {\n            showNotification('Game ended', 'info');\n        }\n    };\n\n    const joinMatchmaking = (size, mode) => {\n        if (!socket) {\n            showNotification('Not connected to server', 'error');\n            return;\n        }\n\n        setBoardSize(size);\n        setGameMode(mode);\n        setInMatchmaking(true);\n        setCurrentScreen('matchmaking');\n\n        socket.emit('join_matchmaking', { mode, boardSize: size });\n        audioManager.playSound('notification');\n    };\n\n    const leaveMatchmaking = () => {\n        if (socket && inMatchmaking) {\n            socket.emit('leave_matchmaking', { mode: gameMode });\n        }\n\n        setInMatchmaking(false);\n        setCurrentScreen('menu');\n        showNotification('Left matchmaking', 'info');\n    };\n\n    const handleMatchFound = async (data) => {\n        setInMatchmaking(false);\n        setOpponent(data.player2.userId === currentUser.userId ? data.player1 : data.player2);\n        setGameSession({ sessionId: data.sessionId });\n\n        audioManager.playSound('matchFound');\n        showNotification('Match found!', 'success');\n\n        // Generate same board for both players\n        const newBoard = puzzleLogic.generateSolvablePuzzle(data.boardSize);\n        setBoard(newBoard);\n        setOpponentBoard(newBoard);\n        setMoveCount(0);\n        setGameTime(0);\n        setMoveHistory([]);\n\n        // Start game after countdown\n        setTimeout(() => {\n            setIsGameActive(true);\n            setCurrentScreen('game');\n            audioManager.playMusic('gameplayIntense');\n        }, 3000);\n    };\n\n    const handleOpponentMove = (moveData) => {\n        setOpponentBoard(moveData.boardState);\n    };\n\n    const handleGameEnd = (data) => {\n        setIsGameActive(false);\n\n        const didWin = data.winnerId === currentUser.userId;\n\n        showNotification(\n            didWin ? 'You won!' : 'You lost!',\n            didWin ? 'success' : 'error'\n        );\n\n        if (didWin) {\n            audioManager.playMusic('victory');\n            audioManager.playSound('puzzleComplete');\n        }\n    };\n\n    const usePowerup = async (powerupKey) => {\n        if (!isGameActive || isPaused) return;\n\n        try {\n            const response = await powerupAPI.use(powerupKey);\n\n            if (response.success) {\n                audioManager.playSound('powerupActivate');\n                showNotification('Powerup activated!', 'success');\n\n                // Apply powerup effect\n                applyPowerupEffect(powerupKey);\n\n                // Notify opponent if multiplayer\n                if (gameMode === 'multiplayer' && socket && gameSession) {\n                    socket.emit('use_powerup', {\n                        sessionId: gameSession.sessionId,\n                        powerupKey\n                    });\n                }\n\n                // Reload powerups\n                const powerupsResponse = await powerupAPI.getUserPowerups();\n                if (powerupsResponse.success) {\n                    setUserPowerups(powerupsResponse.powerups);\n                }\n            }\n        } catch (error) {\n            showNotification('Failed to use powerup', 'error');\n        }\n    };\n\n    const applyPowerupEffect = (powerupKey) => {\n        switch (powerupKey) {\n            case 'peek':\n                // Show solution briefly (handled in GameBoard component)\n                break;\n            case 'hint':\n                const hintTile = puzzleLogic.getHint(board, boardSize);\n                if (hintTile !== null) {\n                    // Highlight tile (handled in GameBoard component)\n                }\n                break;\n            case 'time_freeze':\n                // Pause timer for 10 seconds\n                setIsPaused(true);\n                setTimeout(() => setIsPaused(false), 10000);\n                break;\n            case 'undo_move':\n                // Undo last move\n                if (moveHistory.length > 0) {\n                    const previousState = moveHistory[moveHistory.length - 2];\n                    if (previousState) {\n                        setBoard(previousState.boardState);\n                        setMoveCount(prev => Math.max(0, prev - 1));\n                        setMoveHistory(prev => prev.slice(0, -1));\n                    }\n                }\n                break;\n            default:\n                break;\n        }\n    };\n\n    const checkStoryProgression = (level) => {\n        let segment = null;\n\n        if (level === 5) {\n            segment = {\n                act: 1,\n                title: 'The Lost Reindeer',\n                content: 'Deep in the Northern forests, a young reindeer has wandered from the herd. The ancient puzzle stones glow with mysterious energy, showing you the way to guide them home...'\n            };\n        } else if (level === 15) {\n            segment = {\n                act: 2,\n                title: 'The Northern Lights Mystery',\n                content: 'The Aurora Borealis dances above as you discover the puzzle stones are connected to the lights themselves. Each solved puzzle makes the lights shine brighter, revealing hidden paths through the winter storm...'\n            };\n        } else if (level === 30) {\n            segment = {\n                act: 3,\n                title: 'The Winter Festival',\n                content: 'The reindeer village prepares for the grand Winter Festival! Your puzzle-solving skills have become legendary. Now the elder reindeer ask for your help to solve the ancient Festival Puzzles...'\n            };\n        } else if (level === 50) {\n            segment = {\n                act: 4,\n                title: 'The Grand Aurora',\n                content: 'At last, you have unlocked the final mystery! The puzzle stones reveal themselves as fragments of an ancient aurora crystal. As you complete the final arrangement, the Northern Lights burst forth in spectacular colors, and the entire reindeer kingdom celebrates your achievement!'\n            };\n        }\n\n        if (segment) {\n            setStorySegment(segment);\n            setShowStory(true);\n        }\n    };\n\n    const changeTheme = async (themeName) => {\n        try {\n            await userAPI.updatePreferences({ selected_theme: themeName });\n            setCurrentTheme(themeName);\n            showNotification(`Theme changed to ${themeName}`, 'success');\n        } catch (error) {\n            showNotification('Failed to change theme', 'error');\n        }\n    };\n\n    const checkThemeUnlocks = (stats) => {\n        const unlocks = [];\n\n        if (stats.total_wins >= 50 && currentTheme === 'dasher') {\n            unlocks.push('prancer');\n        }\n        if (stats.total_wins >= 100) {\n            unlocks.push('comet');\n        }\n        if (stats.total_wins >= 200) {\n            unlocks.push('blitzen');\n        }\n        if (stats.elo_rating >= 1800) {\n            unlocks.push('rudolph');\n        }\n        if (currentUser.level >= 50) {\n            unlocks.push('aurora');\n        }\n\n        return unlocks;\n    };\n\n    const loadLeaderboards = async () => {\n        try {\n            const categories = [\n                'speed_4x4',\n                'speed_overall',\n                'moves_4x4',\n                'moves_overall'\n            ];\n\n            const boards = {};\n            for (const category of categories) {\n                const response = await leaderboardAPI.get(category);\n                if (response.success) {\n                    boards[category] = response.leaderboard;\n                }\n            }\n\n            setLeaderboards(boards);\n        } catch (error) {\n            console.error('Error loading leaderboards:', error);\n        }\n    };\n\n    const showNotification = (message, type = 'info') => {\n        const id = Date.now();\n        const notification = { id, message, type };\n\n        setNotifications(prev => [...prev, notification]);\n\n        // Auto-remove after 5 seconds\n        setTimeout(() => {\n            removeNotification(id);\n        }, 5000);\n    };\n\n    const removeNotification = (id) => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n    };\n\n    useEffect(() => {\n        let interval;\n\n        if (isGameActive && !isPaused) {\n            interval = setInterval(() => {\n                setGameTime(prev => prev + 1);\n            }, 1000);\n        }\n\n        return () => {\n            if (interval) clearInterval(interval);\n        };\n    }, [isGameActive, isPaused]);\n\n    const navigateTo = (screen) => {\n        setCurrentScreen(screen);\n\n        if (screen === 'menu') {\n            audioManager.stopMusic();\n            audioManager.playMusic('menu');\n        }\n\n        if (screen === 'leaderboard') {\n            loadLeaderboards();\n        }\n    };\n\n    return (\n        <div className={`app theme-${currentTheme}`}>\n            {/* Notifications */}\n            <div className=\"notification-container\">\n                {notifications.map(notification => (\n                    <NotificationToast\n                        key={notification.id}\n                        message={notification.message}\n                        type={notification.type}\n                        onClose={() => removeNotification(notification.id)}\n                    />\n                ))}\n            </div>\n\n            {/* Main Content */}\n            {!isLoggedIn && (\n                <LoginScreen\n                    onLogin={handleLogin}\n                    onRegister={handleRegister}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'menu' && (\n                <MainMenu\n                    user={currentUser}\n                    stats={userStats}\n                    onStartGame={startGame}\n                    onJoinMatchmaking={joinMatchmaking}\n                    onNavigate={navigateTo}\n                    onLogout={handleLogout}\n                    currentTheme={currentTheme}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'game' && (\n                <GameBoard\n                    board={board}\n                    boardSize={boardSize}\n                    gameMode={gameMode}\n                    moveCount={moveCount}\n                    gameTime={gameTime}\n                    isActive={isGameActive}\n                    isPaused={isPaused}\n                    opponent={opponent}\n                    opponentBoard={opponentBoard}\n                    userPowerups={userPowerups}\n                    onTileClick={handleTileClick}\n                    onUsePowerup={usePowerup}\n                    onPause={() => setIsPaused(!isPaused)}\n                    onQuit={() => {\n                        endGame(true);\n                        navigateTo('menu');\n                    }}\n                    currentTheme={currentTheme}\n                    preferences={userPreferences}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'matchmaking' && (\n                <Matchmaking\n                    boardSize={boardSize}\n                    gameMode={gameMode}\n                    onCancel={leaveMatchmaking}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'leaderboard' && (\n                <Leaderboard\n                    leaderboards={leaderboards}\n                    currentUser={currentUser}\n                    onBack={() => navigateTo('menu')}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'profile' && (\n                <UserProfile\n                    user={currentUser}\n                    stats={userStats}\n                    achievements={userAchievements}\n                    onBack={() => navigateTo('menu')}\n                    onUpdateProfile={async (updates) => {\n                        await userAPI.updateProfile(updates);\n                        await loadUserData(currentUser.userId);\n                    }}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'achievements' && (\n                <AchievementPanel\n                    achievements={achievements}\n                    userAchievements={userAchievements}\n                    onBack={() => navigateTo('menu')}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'powerups' && (\n                <PowerupInventory\n                    powerups={powerups}\n                    userPowerups={userPowerups}\n                    onBack={() => navigateTo('menu')}\n                />\n            )}\n\n            {isLoggedIn && currentScreen === 'settings' && (\n                <SettingsPanel\n                    preferences={userPreferences}\n                    currentTheme={currentTheme}\n                    onUpdatePreferences={async (prefs) => {\n                        await userAPI.updatePreferences(prefs);\n                        await loadUserData(currentUser.userId);\n                        applyPreferences(prefs);\n                    }}\n                    onChangeTheme={changeTheme}\n                    onBack={() => navigateTo('menu')}\n                    availableThemes={checkThemeUnlocks(userStats || {})}\n                />\n            )}\n\n            {/* Modals */}\n            {showVictory && (\n                <VictoryScreen\n                    data={victoryData}\n                    onClose={() => {\n                        setShowVictory(false);\n                        navigateTo('menu');\n                    }}\n                    onPlayAgain={() => {\n                        setShowVictory(false);\n                        startGame(boardSize, gameMode);\n                    }}\n                />\n            )}\n\n            {showStory && (\n                <StoryModal\n                    segment={storySegment}\n                    onClose={() => setShowStory(false)}\n                />\n            )}\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}